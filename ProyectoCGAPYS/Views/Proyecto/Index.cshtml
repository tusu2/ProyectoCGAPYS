<link rel="stylesheet" href="~/css/Buscar.css" asp-append-version="true" />
<div class="container">
    <h1>Plataforma de Proyectos</h1>

    <div class="filtros-container">
        <h2>Filtrar Proyectos</h2>
        <form id="filtros-form">
            <div class="filtro-item">
                <label for="filtro-nombre">Nombre del proyecto:</label>
                <input type="text" id="filtro-nombre" name="filtro-nombre">
            </div>
            <div class="filtro-item">
                <label for="filtro-dependencia">Dependencia o Área Solicitante:</label>
                <select id="filtro-dependencia" name="filtro-dependencia" asp-items="ViewBag.Dependencias">
                    <option value="">-- Todas --</option>
                </select>
            </div>
            <div class="filtro-item filtro-rango-fechas">
                <label>Ejercicio (Fecha de Solicitud):</label>
                <div class="fecha-inputs">
                    <input type="date" id="filtro-fecha-inicio" name="filtro-fecha-inicio" placeholder="Desde">
                    <span>-</span>
                    <input type="date" id="filtro-fecha-fin" name="filtro-fecha-fin" placeholder="Hasta">
                </div>
            </div>
            <div class="filtro-botones">
                <button type="button" id="aplicar-filtros-btn">Aplicar Filtros</button>
                <button type="button" id="limpiar-filtros-btn">Limpiar Filtros</button>
            </div>
        </form>
    </div>

    <div class="layout-container">
        <div id="mapa-principal-container">
            <div id="mapa-principal"></div>
        </div>
        <div id="lista-proyectos-container">
            <h2>Proyectos Disponibles</h2>
            <ul id="lista-proyectos">
            </ul>
        </div>
    </div>
</div>

<div id="modal-proyecto" class="modal">
    <div class="modal-contenido">
        <div class="modal-header">
            <h2 id="modal-nombre-proyecto"></h2>
            <button class="cerrar-modal">&times;</button>
        </div>
        <div class="modal-body">
            <div id="modal-detalles">
            </div>

            <div class="modal-acciones">
                <button id="abrir-costos-btn" class="boton-costos">Administrar Presupuesto</button>
            </div>

            <div id="seccion-costos" style="display: none;">
                <h3>Desglose de Conceptos</h3>

                <div class="form-costos">
                    <div class="form-grupo full-width">
                        <label for="costo-categoria">Categoría</label>
                        <select id="costo-categoria"></select>
                    </div>
                    <div class="form-grupo full-width">
                        <label for="costo-concepto">Concepto</label>
                        <select id="costo-concepto"></select>
                    </div>

                    <div class="form-grupo">
                        <label for="costo-cantidad">Cantidad</label>
                        <input type="number" id="costo-cantidad" placeholder="0.00">
                    </div>
                    <div class="form-grupo">
                        <label for="costo-precio">Precio Unitario</label>
                        <input type="number" id="costo-precio" placeholder="$ 0.00">
                    </div>
                    <div class="form-grupo">
                        <label>&nbsp;</label>
                        <button id="agregar-costo-btn">Añadir</button>
                    </div>
                </div>

                <table id="tabla-costos">
                    <thead>
                        <tr>
                            <th>Concepto</th>
                            <th>Cantidad</th>
                            <th>P. Unitario</th>
                            <th>Importe</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpo-tabla-costos">
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3">Total del Proyecto</td>
                            <td id="costo-total-proyecto">$ 0.00</td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script src="~/js/site.js" asp-append-version="true"></script>
}